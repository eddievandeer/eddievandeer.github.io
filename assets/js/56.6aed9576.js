(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{448:function(s,n,e){"use strict";e.r(n);var a=e(0),t=Object(a.a)({},(function(){var s=this,n=s.$createElement,e=s._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey},scopedSlots:s._u([{key:"abstract",fn:function(){return[e("p",[s._v("前段时间买了个域名，于是打算将我的博客网站部署到个人服务器上。作为一个前端人，如何部署前端项目一直是个不太好解决的问题，主要是不太熟悉服务器端的各种操作（我太菜了😭）。在网上看了各种的解决方案后，最后挑选了 "),e("a",{attrs:{href:"http://www.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Docker"),e("OutboundLink")],1),s._v(" + "),e("a",{attrs:{href:"http://nginx.org/en/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Nginx"),e("OutboundLink")],1),s._v(" 来进行部署。")]),s._v(" "),e("blockquote",[e("p",[s._v("在部署的过程中遇到了亿点点坑，这里从头梳理一遍部署过程，希望看到的有缘人能绕开我踩过的那些坑。")])])]},proxy:!0}])},[e("h2",{attrs:{id:"准备工作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#准备工作"}},[s._v("#")]),s._v(" 准备工作")]),s._v(" "),e("p",[s._v("首先要准备一台服务器（"),e("em",[s._v("这里我使用的是CentOS 7")]),s._v("），然后就可以开始安装Docker了")]),s._v(" "),e("p",[s._v("如果装过旧版的Docker的话，可以使用以下命令卸载旧版本：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果你是root用户的话可以不必加 sudo ")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum remove docker "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                docker-client "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                docker-client-latest "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                docker-common "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                docker-latest "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                docker-latest-logrotate "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                docker-logrotate "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                docker-engine\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("p",[s._v("未安装过Docker或卸载完旧版本后，运行如下命令进行Docker的安装：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" docker\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 验证安装是否成功")]),s._v("\ndocker version\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("安装完毕后，启动Docker服务：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl start docker\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("成功安装并启动了Docker后，就可以开始安装Nginx镜像了：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker pull nginx\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("查看安装的镜像：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker images\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("img",{attrs:{src:"http://upyun.cavalheiro.cn/images/image-20210526092636183.png",alt:"image-20210526092636183"}})]),s._v(" "),e("p",[s._v("到这里准备工作就已经做完了，接下来开始项目的部署")]),s._v(" "),e("h2",{attrs:{id:"开始部署"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#开始部署"}},[s._v("#")]),s._v(" 开始部署")]),s._v(" "),e("p",[s._v("这里记录两个部署的方式，一个是使用-v挂载，一个是使用Dockerfile")]),s._v(" "),e("h3",{attrs:{id:"v挂载"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#v挂载"}},[s._v("#")]),s._v(" -v挂载")]),s._v(" "),e("p",[s._v("先启动一个临时的容器，并取得他的容器ID：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker run -d --name"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx nginx\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -d 后台运行，--name 为容器命名")]),s._v("\n\ndocker "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("启动完成后创建一个 "),e("strong",[s._v("nginx")]),s._v(" 文件夹（理论上在哪都行，我放在了 "),e("code",[s._v("/usr/local/server/nginx")]),s._v(" 下）并进入，然后将容器内的默认配置文件拷贝到刚创建的文件夹下：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里会在 nginx 目录下自动创建一个 conf 文件夹")]),s._v("\ndocker "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("容器id"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(":/etc/nginx ./conf\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("blockquote",[e("p",[s._v("拷贝完默认配置文件后，即可修改目录中的配置文件的内容来对Nginx进行配置")])]),s._v(" "),e("p",[s._v("再创建一个 "),e("strong",[s._v("html")]),s._v(" 文件夹，用于放置资源文件")]),s._v(" "),e("p",[s._v("到这里为止，刚刚创建的容器已经没有用了，可以使用如下命令移除：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止nginx")]),s._v("\ndocker stop nginx\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除nginx")]),s._v("\ndocker "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" nginx\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("接下来的操作才是关键，使用下面的命令创建正式的容器：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker run -d --name"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx \n        -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(":80 \n        -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v(":443 \n\t\t-v /usr/local/server/nginx/conf:/etc/nginx \n\t\t-v /usr/local/server/nginx/html:/usr/share/nginx/html \n\t\tnginx\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[s._v("这里解释一下这个命令的各个配置项：")]),s._v(" "),e("ul",[e("li",[e("p",[e("code",[s._v("-d")]),s._v(" 后台运行")])]),s._v(" "),e("li",[e("p",[e("code",[s._v("--name=nginx")]),s._v(" 将容器命名为nginx")])]),s._v(" "),e("li",[e("p",[e("code",[s._v("-p 80:80 -p 443:443")]),s._v(" 将容器的端口映射到主机的端口")])]),s._v(" "),e("li",[e("p",[e("code",[s._v("-v /usr/local/server/nginx/conf:/etc/nginx")])]),s._v(" "),e("ul",[e("li",[s._v("将主机中的 "),e("strong",[s._v("/usr/local/server/nginx/conf")]),s._v(" 目录挂载到容器的 "),e("strong",[s._v("/etc/nginx")]),s._v(" 下")]),s._v(" "),e("li",[s._v("该目录下存放的是各个配置文件")]),s._v(" "),e("li",[s._v("在主机目录下做出的改变会同步到容器中")])])]),s._v(" "),e("li",[e("p",[e("code",[s._v("-v /usr/local/server/nginx/html:/usr/share/nginx/html")])]),s._v(" "),e("ul",[e("li",[s._v("将主机中的 "),e("strong",[s._v("/usr/local/server/nginx/html")]),s._v(" 目录挂载到容器的 "),e("strong",[s._v("/usr/share/nginx/html")]),s._v(" 下")]),s._v(" "),e("li",[s._v("该目录存放资源文件，即HTML，CSS，JS等")]),s._v(" "),e("li",[s._v("在主机目录下做出的改变会同步到容器中")])])])]),s._v(" "),e("p",[s._v("到这里 Docker + Nginx 的部署就已经完成了，可以直接在项目源码的目录下运行 "),e("code",[s._v("npm run build")]),s._v(" 命令，然后将 "),e("code",[s._v("dist")]),s._v(" 文件夹下的内容复制到主机的 "),e("code",[s._v("/usr/local/server/nginx/html")]),s._v(" 目录下即可")]),s._v(" "),e("h3",{attrs:{id:"dockerfile"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile"}},[s._v("#")]),s._v(" Dockerfile")]),s._v(" "),e("p",[s._v("使用 "),e("code",[s._v("Dockerfile")]),s._v(" 即自己创建一个镜像，需要用到Docker的 "),e("code",[s._v("build")]),s._v(" 命令。在运行命令之前，我们先来创建Dockerfile这么一个关键文件")]),s._v(" "),e("p",[s._v("Dockerfile 是一个用来构建镜像的文本文件，文本内容包含了一条条构建镜像所需的指令和说明。进入项目所在的文件夹中，创建 "),e("code",[s._v("Dockerfile")]),s._v(" 文件，具体内容如下：")]),s._v(" "),e("div",{staticClass:"language-dockerfile line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" nginx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("latest\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COPY")]),s._v(" dist/ /usr/share/nginx/html/\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("blockquote",[e("p",[s._v("这里的 "),e("code",[s._v("dist")]),s._v(" 目录是用 "),e("code",[s._v("npm run build")]),s._v(" 或其他形式的打包命令生成的，需要实现打包好再去执行上述命令")])]),s._v(" "),e("p",[s._v("如果要对Nginx进行配置的话，可以创建一个 "),e("code",[s._v("default.conf.template")]),s._v(" 文件，并将其COPY进镜像（这里我将文件放在了 "),e("strong",[s._v("/config/nginx/")]),s._v(" 目录下）")]),s._v(" "),e("p",[e("code",[s._v("default.conf.template")]),s._v(" 可参考如下配置：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("server {\n    listen       ${NGINX_PORT};\n    server_name  ${NGINX_DOMAIN};\n\n    location / {\n        root   /usr/share/nginx/html;\n        index  index.html index.htm;\n        try_files $uri /index.html;\n    }\n\n    error_page   500 502 503 504  /50x.html;\n    location = /50x.html {\n        root   /usr/share/nginx/html;\n    }\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br")])]),e("p",[s._v("修改一下Dockerfile，添加设置环境变量和COPY文件的操作：")]),s._v(" "),e("div",{staticClass:"language-dockerfile line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" nginx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("latest\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置端口和域名的环境变量")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENV")]),s._v(" NGINX_PORT=80 NGINX_DOMAIN=localhost\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COPY")]),s._v(" /config/nginx/default.conf.template /etc/nginx/templates/default.conf.template\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COPY")]),s._v(" dist/ /usr/share/nginx/html/\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("p",[s._v("两个文件都准备完毕后，即可开始镜像的创建。运行如下命令：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 运行build命令前先进入")]),s._v("\ndocker build -t imageName:tagName "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" \n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# imageName 镜像名")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# tagName   镜像tag名")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# . \t\t代表当前目录")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("待命令执行完成后，可以使用 "),e("code",[s._v("docker images")]),s._v(" 查看自己创建的镜像")]),s._v(" "),e("p",[s._v("创建完镜像后，执行命令创建容器：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker run -d --name"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Name -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(":80 imageName\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置项的含义见-v挂载篇")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("然后使用 "),e("code",[s._v("docker ps")]),s._v(" 就可以查看创建的容器了")]),s._v(" "),e("p",[s._v("到这一步就完成了前端项目的部署，进入浏览器输入域名或ip即可访问自己的网站")]),s._v(" "),e("h2",{attrs:{id:"部分nginx的配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#部分nginx的配置"}},[s._v("#")]),s._v(" 部分Nginx的配置")]),s._v(" "),e("p",[s._v("我在进行前端项目的部署时，用到了二级域名，还创建了一个监听8888端口的容器用于访问我写的"),e("a",{attrs:{href:"http://resume.cavalheiro.cn/",target:"_blank",rel:"noopener noreferrer"}},[s._v("简历生成器"),e("OutboundLink")],1),s._v("，但不想在访问时域名后加 "),e("code",[s._v(":端口号")]),s._v(" （这里需要用到Nginx反向代理）")]),s._v(" "),e("p",[s._v("为实现刚才提到的这些需求，需要在 "),e("code",[s._v("conf/conf.d/default.conf")]),s._v(" 的配置文件中进行如下配置：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("server {\n    listen       80;\n    listen  [::]:80;\n    # 配置域名\n    server_name     cavalheiro.cn;\n\n    location / {\n    \t# 配置该域名对应的根目录\n        root    /usr/share/nginx/html/blog;\n        index   index.html index.htm;\n    }\n}\nserver {\n\tlisten       80;\n\tlisten  [::]:80;\n\t# 配置二级域名\n    server_name  ac.cavalheiro.cn;\n\n    location / {\n    \t# 配置该域名对应的根目录\n        root   /usr/share/nginx/html/ac;\n        index  index.html index.htm;\n    }\n}\nserver {\n\tlisten       80;\n\tlisten  [::]:80;\n\t# 配置二级域名\n    server_name  resume.cavalheiro.cn;\n\n    location / {\n    \t# 配置反向代理\n        proxy_pass   http://localhost:8888;\n        index  index.html index.htm;\n    }\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br")])]),e("blockquote",[e("p",[s._v("若你在项目中使用了Vue-router的同时，Vue-router开的是history模式，会出现访问部分路由出现404的现象，需要再进行如下配置：")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("server {\n    listen          80;\n    server_name     cavalheiro.cn;\n\n    location / {\n        root    /usr/share/nginx/html/blog;\n        index   index.html index.htm;\n        # 关键代码，添加后Nginx支持history模式\n        try_files $uri $uri/ /index.html;\n    }\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br")])])])}),[],!1,null,null,null);n.default=t.exports}}]);