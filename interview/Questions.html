<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>面试题 | Vivek的博客小站</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" href="/assets/icon/favicon.ico">
    <meta name="description" content="May the force be with you">
    <link rel="preload" href="/assets/css/0.styles.7b2751ac.css" as="style"><link rel="preload" href="/assets/js/app.55e05ce9.js" as="script"><link rel="preload" href="/assets/js/6.a1c01ea9.js" as="script"><link rel="preload" href="/assets/js/3.74d85e3e.js" as="script"><link rel="preload" href="/assets/js/30.348c7c52.js" as="script"><link rel="preload" href="/assets/js/7.01252fed.js" as="script"><link rel="prefetch" href="/assets/js/10.1cc7c7f8.js"><link rel="prefetch" href="/assets/js/11.2fb702c9.js"><link rel="prefetch" href="/assets/js/12.ef811a84.js"><link rel="prefetch" href="/assets/js/13.78e61793.js"><link rel="prefetch" href="/assets/js/14.e57e0404.js"><link rel="prefetch" href="/assets/js/15.152ef9c7.js"><link rel="prefetch" href="/assets/js/16.24510691.js"><link rel="prefetch" href="/assets/js/17.eaa11b95.js"><link rel="prefetch" href="/assets/js/18.ac33b025.js"><link rel="prefetch" href="/assets/js/19.c327f8b3.js"><link rel="prefetch" href="/assets/js/2.4852100c.js"><link rel="prefetch" href="/assets/js/20.35f7d797.js"><link rel="prefetch" href="/assets/js/21.6dbb2330.js"><link rel="prefetch" href="/assets/js/22.82f9d8c1.js"><link rel="prefetch" href="/assets/js/23.bc38ce5b.js"><link rel="prefetch" href="/assets/js/24.a952638a.js"><link rel="prefetch" href="/assets/js/25.f66bd3a4.js"><link rel="prefetch" href="/assets/js/26.87ca4a1f.js"><link rel="prefetch" href="/assets/js/27.eb0e59ea.js"><link rel="prefetch" href="/assets/js/28.fe1c1a7e.js"><link rel="prefetch" href="/assets/js/29.a7678978.js"><link rel="prefetch" href="/assets/js/31.eac95c98.js"><link rel="prefetch" href="/assets/js/32.309c9297.js"><link rel="prefetch" href="/assets/js/33.779b6bce.js"><link rel="prefetch" href="/assets/js/4.03cedc90.js"><link rel="prefetch" href="/assets/js/5.80f44919.js"><link rel="prefetch" href="/assets/js/8.a2458906.js"><link rel="prefetch" href="/assets/js/9.04b5b659.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7b2751ac.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-66d3024a><div class="blog-header" data-v-66d3024a><div class="tool-bar" data-v-45f474db><div class="tool-bar-1" data-v-45f474db><div class="navigation-bar" data-v-45f474db><div class="bar-item"><a href="/" class="router-link-active"><button type="button">首页</button></a></div><div class="bar-item"><a href="/frontend/"><button type="button">前端笔记</button></a></div><div class="bar-item"><a href="/album/"><button type="button">画册</button></a></div><div class="bar-item"><a href="/interview" class="router-link-active"><button type="button">面试</button></a></div><div class="bar-list">
    工具箱   <i aria-hidden="true" class="fa fa-caret-down"></i> <div class="bar-item-list"><div class="bar-item"><a href="https://tinypng.com/" target="_blank"><button type="button">
            图片压缩
            <i aria-hidden="true" class="fa fa-external-link"></i></button></a></div><div class="bar-item"><a href="https://sm.ms/" target="_blank"><button type="button">
            免费图床
            <i aria-hidden="true" class="fa fa-external-link"></i></button></a></div><div class="bar-item"><a href="https://www.iconfont.cn/home/index" target="_blank"><button type="button">
            矢量图标库
            <i aria-hidden="true" class="fa fa-external-link"></i></button></a></div><div class="bar-item"><a href="http://zhongguose.com/" target="_blank"><button type="button">
            中国色
            <i aria-hidden="true" class="fa fa-external-link"></i></button></a></div><div class="bar-item"><a href="https://learngitbranching.js.org/?locale=zh_CN" target="_blank"><button type="button">
            Git可视化学习
            <i aria-hidden="true" class="fa fa-external-link"></i></button></a></div><div class="bar-item"><a href="https://flatuicolors.com/" target="_blank"><button type="button">
            取色板
            <i aria-hidden="true" class="fa fa-external-link"></i></button></a></div></div></div></div></div> <div class="mobile-bar" data-v-7ed36b1a data-v-45f474db><div class="mobile-bar-list" data-v-7ed36b1a><button class="show-list" data-v-7ed36b1a><i aria-hidden="true" class="fa fa-bars" data-v-7ed36b1a></i></button></div> <div class="home-link" data-v-7ed36b1a><a href="/" data-v-7ed36b1a><h2 class="title" data-v-7ed36b1a>首页</h2></a></div></div> <div class="search" data-v-45f474db><div class="search-box" data-v-45f474db><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div> <div class="tool-bar-2" data-v-45f474db><div class="bar-item" data-v-45f474db><a href="https://codepen.io/eddievandeer" target="_blank"><button type="button">
            CodePen
            <i aria-hidden="true" class="fa fa-external-link"></i></button></a></div><div class="bar-item" data-v-45f474db><a href="https://github.com/eddievandeer/eddievandeer.github.io" target="_blank"><button type="button">
            GitHub
            <i aria-hidden="true" class="fa fa-external-link"></i></button></a></div></div></div></div> <div class="index-container" data-v-55609a39 data-v-66d3024a><div class="list-container" data-v-687ea953 data-v-55609a39></div></div> <div class="article" data-v-66d3024a><div class="article-detail" data-v-66d3024a><div class="content__default" data-v-66d3024a><h1 id="面试题"><a href="#面试题" class="header-anchor">#</a> 面试题</h1> <h2 id="第一题"><a href="#第一题" class="header-anchor">#</a> 第一题</h2> <h3 id="object-defineproperty"><a href="#object-defineproperty" class="header-anchor">#</a> Object.defineProperty()</h3> <blockquote><p>阿里面试题</p></blockquote> <p><strong>题目：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 让下列代码打印出结果</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>a <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">===</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'You win!'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>解答：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//  定义一个变量，用于控制返回的内容</span>
<span class="token keyword">let</span> _default <span class="token operator">=</span> <span class="token number">0</span>

<span class="token comment">// a未定义，因此挂载在window上</span>
<span class="token comment">// 覆盖window对象的a属性的取值行为</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">++</span>_default
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 每次取值_default自增，因此每次判断时a的值都不一样</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>a <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">===</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'You win!'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="第二题"><a href="#第二题" class="header-anchor">#</a> 第二题</h2> <h3 id="length"><a href="#length" class="header-anchor">#</a> .length</h3> <p><strong>题目：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 写出下列各变量的值</span>
<span class="token keyword">var</span> len1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">+</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> len2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> len3 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>解答：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 进行加法运算之前，会进行一次类型转换(toString)</span>
<span class="token comment">// 对象转换为字符串的结果为：&quot;[object Object]&quot;</span>
<span class="token comment">// 因此加法运算结果为：&quot;[object Object][object Object]&quot;</span>
<span class="token keyword">var</span> len1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">+</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 数组有自己的toString方法，转换方式如下：</span>
<span class="token comment">// [1,2,3].toString() -&gt; &quot;1,2,3&quot;</span>
<span class="token comment">// 因此加法运算结果为：&quot;&quot;</span>
<span class="token keyword">var</span> len2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// function的.length属性返回的是形参个数</span>
<span class="token keyword">var</span> len3 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>答案：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>len1 <span class="token operator">=</span> <span class="token number">30</span>
len2 <span class="token operator">=</span> <span class="token number">0</span>
len3 <span class="token operator">=</span> <span class="token number">0</span>
</code></pre></div><h2 id="第三题"><a href="#第三题" class="header-anchor">#</a> 第三题</h2> <h3 id="function"><a href="#function" class="header-anchor">#</a> function</h3> <p><strong>题目：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 写出下列代码的执行结果</span>
<span class="token keyword">function</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span>
<span class="token punctuation">}</span>

Foo<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token class-name">Foo</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> <span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

Foo<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">new</span> <span class="token class-name">Foo<span class="token punctuation">.</span>getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">new</span> <span class="token class-name">new</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>解答：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 构造函数</span>
<span class="token keyword">function</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 全局变量赋值，执行Foo函数时才会执行下列的赋值语句</span>
    <span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 直接执行: this指向window</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span>
<span class="token punctuation">}</span>

<span class="token comment">// 函数Foo上的静态方法 -&gt; 一个函数对象上的方法/树形</span>
Foo<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 扩展函数原型上的方法</span>
<span class="token comment">// var foo = new Foo() -&gt; foo.getName</span>
<span class="token class-name">Foo</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 给全局变量赋值为一个匿名函数</span>
<span class="token comment">/**
 * 全局预编译 -&gt; GO{}
 * GO{
 *     getName: 
 *     变量声明 undefined -&gt; 
 *     函数声明 function getName(){} -&gt;
 * 	   赋值行为 function (){ console.log(4) }
 * }
 */</span>
<span class="token keyword">var</span> <span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 函数声明</span>
<span class="token keyword">function</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 执行Foo函数上的静态方法</span>
Foo<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 执行window.getName</span>
<span class="token comment">// 经过全局预编译，当前window.getName的值为: </span>
<span class="token comment">// function (){ console.log(4) }</span>
<span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 执行Foo()，全局变量赋值，返回window（this）</span>
<span class="token comment">// 此时Foo().getName()执行的是window.getName()</span>
<span class="token comment">// 而全局的getName已被修改，因此打印出1</span>
<span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// window.getName已被修改，打印1</span>
<span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 访问Foo的静态方法来</span>
<span class="token keyword">new</span> <span class="token class-name">Foo<span class="token punctuation">.</span>getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 实例化Foo()构造函数后，调用getName方法</span>
<span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">/** 
 * new {[new Foo()].getName()}
 * 执行顺序
 * new Foo(): 实例化Foo()构造函数 -&gt; 
 * new [创建的Object].getName(): 实例化Foo()创建的对象上的getName构造函数
 */</span>
<span class="token keyword">new</span> <span class="token class-name">new</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>答案：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">2</span>
<span class="token number">4</span>
<span class="token number">1</span>
<span class="token number">1</span>
<span class="token number">2</span>
<span class="token number">3</span>
<span class="token number">3</span>
</code></pre></div><h2 id="第四题"><a href="#第四题" class="header-anchor">#</a> 第四题</h2> <p><strong>事件循环</strong></p> <blockquote><p>字节跳动面试题：</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 写出下面这段代码打印的结果</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async1 start'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async1 end'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async2 start'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async2 promise'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script start'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setTimeout'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise3'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script end'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 答案</span>
script start
async1 start
async2 start
async2 promise
promise1
script end
promise2
promise3
async1 end
setTimeout
</code></pre></div><p><strong>面试题解析</strong>：</p> <ol><li>console.log('script start') 压入执行栈并执行弹出，打印 <strong>script start</strong></li> <li>setTimeout() 压入执行栈，其中的回调函数进入消息队列，弹出setTimeout()</li> <li>async1() 压入执行栈，再将console.log('async1 start') 压入执行栈并执行弹出，打印 <strong>async1 start</strong></li> <li>遇到await时，在执行完右边的表达式后，会先让出线程，执行外部同步代码（即跳出当前的async1()），阻塞后面的console.log('async1 end')</li> <li>执行await后的表达式，async2() 压入执行栈，再将console.log('async2 start') 压入执行栈并执行弹出，打印 <strong>async2 start</strong></li> <li>Promise() 构造函数压入执行栈，再将resolve()，console.log('async2 promise') 压入执行栈，执行并弹出，打印 <strong>async2 promise</strong></li> <li>async2() 弹出，同时跳出async1()，执行后续代码</li> <li>Promise() 构造函数压入执行栈，console.log('async2 promise')，resolve() 压入执行栈，执行并弹出，打印 <strong>promise1</strong></li> <li>Promise 后面两个then() 的回调函数进入微任务队列中</li> <li>console.log('script end') 压入执行栈并执行弹出，打印 <strong>script end</strong></li> <li>此时调用栈为空，回到async1() ，console.log('async1 end') 进入微任务队列</li> <li>将微任务队列中的任务压入调用栈执行并弹出，依次打印 <strong>promise2</strong> 、 <strong>promise3</strong> 和 <strong>async1 end</strong></li> <li>微任务队列中的任务执行完后，处理消息队列中的任务，打印 <strong>setTimeout</strong></li></ol></div> <div class="valine-body" data-v-0728a340 data-v-66d3024a><div class="footer" data-v-0728a340><span id="" data-flag-title="Your Article Title" class="leancloud_visitors" data-v-0728a340><em class="post-meta-item-text" data-v-0728a340>阅读量 </em> <i class="leancloud-visitors-count" data-v-0728a340></i></span> <div class="last-updated" data-v-0728a340><span class="prefix" data-v-0728a340>上次更新：</span> <span class="time" data-v-0728a340></span></div></div> <div id="valine-vuepress-comment" data-v-0728a340></div></div></div></div> <div class="pagination-wrapper" style="opacity:1;" data-v-4e10ea4f data-v-66d3024a><div class="pagination-pre" data-v-4e10ea4f><i aria-hidden="true" class="fa fa-chevron-left" data-v-4e10ea4f></i></div> <div class="pagination-next" data-v-4e10ea4f><i aria-hidden="true" class="fa fa-chevron-right" data-v-4e10ea4f></i></div></div></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.55e05ce9.js" defer></script><script src="/assets/js/6.a1c01ea9.js" defer></script><script src="/assets/js/3.74d85e3e.js" defer></script><script src="/assets/js/30.348c7c52.js" defer></script><script src="/assets/js/7.01252fed.js" defer></script>
  </body>
</html>
